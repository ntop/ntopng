<!--page container-->
<div class='container-fluid mt-3'>
    <div class='row'>
        <div class='col-md-12 col-lg-12'>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">{{ i18n("config_scripts.config_list", {}) }}</li>
                    {# print current page on the breadcrumb #}
                    <li class="breadcrumb-item active">{{ config_list.hooks_localizated[config_list.subdir] }}</li>
                </ol>
            </nav>
            <ul class="nav nav-pills">
                {% for _, hooks_subdir in ipairs(config_list.user_scripts.listSubdirs()) do %}
        
                        <li class="nav-item">
                            <a class="nav-link {{ (hooks_subdir.id == config_list.subdir and 'active' or '') }}" href="?subdir={{hooks_subdir.id}}">
                                {{hooks_subdir.label}}
                            </a>
                        </li>
    
                {% end %}
            </ul>
            <table id="config-list" class='table w-100 table-bordered table-striped table-hover mt-3'>
                   <thead>
                        <tr>
                            <th>{{ i18n("config_scripts.config_name", {}) }}</th>
                            <th>{{ i18n("config_scripts.applied_to", {}) }}</th>
                            <th>{{ i18n("config_scripts.config_setting", {}) }}</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
            </table>
        </div>
    </div>
</div>

{# include modals for config_list.lua #}

{* config_list.template_utils.gen("config_list_components/clone_modal.html") *}
{* config_list.template_utils.gen("config_list_components/rename_modal.html") *}
{* config_list.template_utils.gen("config_list_components/delete_modal.html") *}
{* config_list.template_utils.gen("config_list_components/apply_modal.html", {
    subdir = config_list.subdir
}) *}

{# include css and javascript code for the page #}

<link href="{{ ntop.getHttpPrefix() }}/datatables/datatables.min.css" rel="stylesheet"/>
<script type='text/javascript'>

// hold a csrf token for apply targets
let apply_csrf = '{{ ntop.getRandomCSRFValue() }}';
let clone_csrf = '{{ ntop.getRandomCSRFValue() }}';
let rename_csrf = '{{ ntop.getRandomCSRFValue() }}';
const delete_csrf = '{{ ntop.getRandomCSRFValue() }}';

const subdir = '{{ config_list.subdir }}';

i18n.warning ="{{ i18n('warning', {}) }}"
i18n.no_targets_applied = "{{ i18n('config_scripts.no_targets_applied', {}) }}"
i18n.empty_value_message = "{{ i18n('config_scripts.empty_value_message', {}) }}"
i18n.empty_target_message = "{{ i18n('config_scripts.empty_target_message', {}) }}"

</script>
<script type='text/javascript' src='{{ ntop.getHttpPrefix() }}/js/config_callbacks/config-list-utils.js'></script>
<script type="text/javascript">
setTimeout(() => { document.location.reload()}, {{ config_list.timeout_csrf }});
</script>